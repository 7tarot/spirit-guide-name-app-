<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Spirit Guide App â€” v2.6</title>
  <meta name="theme-color" content="#00ff88"/>
  <link rel="stylesheet" href="style.css"/>
  <style>
    :root{--neo:#00ff88;--bg:#050a08;--ink:#d6ffe9;--panel:#071510}
    html,body{background:var(--bg);color:var(--ink);font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;line-height:1.5;margin:0}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    .header h1{color:var(--neo);margin:.2rem 0}
    .tag{opacity:.8}
    .card{border:1px solid var(--neo);border-radius:14px;padding:16px;margin:18px 0;box-shadow:0 0 18px #00ff8840;background:linear-gradient(180deg,rgba(0,255,136,.06),transparent)}
    .grid{display:grid;grid-template-columns:1.4fr .8fr;gap:18px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:18px}
    .num-grid .num-row{display:grid;grid-template-columns:160px 90px 1fr;gap:10px;padding:8px 0;border-bottom:1px dashed #0c2}
    .pill{border:1px solid var(--neo);border-radius:999px;padding:4px 10px;display:inline-block;color:var(--neo);margin-left:8px}
    .btn{background:var(--neo);color:#022;border:none;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--neo);border:1px solid var(--neo)}
    .picker, input[type="date"], input[type="text"], textarea{background:#03150f;color:var(--ink);border:1px solid var(--neo);border-radius:8px;padding:8px 10px;width:100%}
    .field{margin:8px 0}
    .hidden{display:none}
    .timeline{display:flex;gap:8px;overflow:auto;padding:8px;border:1px dashed #0c2;border-radius:10px}
    .dot{position:relative;width:18px;height:18px;border-radius:50%;background:#093}
    .dot.karmic{background:#8b0000}
    .dot.soulmate{background:#0a6}
    .dot.twin{box-shadow:0 0 10px gold inset, 0 0 6px gold}
    .dot.now{outline:2px solid #fff}
    .dot-label{position:absolute;top:22px;white-space:pre;font-size:11px}
    blockquote{border-left:3px solid var(--neo);margin:4px 0;padding-left:10px}
    .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
    .cal-cell{border:1px solid #0c2;border-radius:6px;padding:8px;text-align:center}
    .cal-cell.good{background:rgba(0,255,136,.15)}
    .cal-cell.bad{background:rgba(255,0,0,.10)}
    .cal-cell.today{outline:2px solid var(--neo)}
    .sigil-svg{width:100%;height:120px}
    .sigil-stroke{font: 48px "Courier New", monospace; fill: var(--neo)}
    .meta{opacity:.85}
    .footer{opacity:.7;margin-top:10px}
    .actions{margin-top:8px}
  </style>
</head>
<body>
  <main class="container">
    <header class="header">
      <h1>Spirit Guide App</h1>
      <p class="tag">Deterministic â€¢ Numerology â€¢ Tarot â€¢ Connections â€¢ Audio</p>
    </header>

    <!-- FORM -->
    <section id="formSection" class="card">
      <h2>Your details</h2>
      <form id="guideForm" novalidate>
        <div class="field">
          <label for="name">Full name</label>
          <input id="name" type="text" placeholder="e.g., Steven John Abbott" required>
        </div>
        <div class="field">
          <label for="dob">Birth date</label>
          <input id="dob" type="date" required>
        </div>
        <div class="field">
          <label for="intent">Question / Intent (optional)</label>
          <textarea id="intent" rows="2"></textarea>
        </div>
        <div class="actions" style="display:flex;gap:8px;flex-wrap:wrap">
          <button class="btn" type="submit">Calculate</button>
          <button class="btn ghost" type="button" id="demoBtn">Demo</button>
        </div>
      </form>
    </section>

    <!-- RESULTS -->
    <section id="resultSection" class="card hidden">
      <div style="display:flex;justify-content:space-between;flex-wrap:wrap">
        <div>
          <h2 id="guideName"></h2>
          <p id="guideMeta" class="meta"></p>
        </div>
        <div>
          <span id="lifePath" class="pill"></span>
          <span id="seedOut" class="pill"></span>
        </div>
      </div>

      <div class="grid">
        <div>
          <h3>Backstory</h3>
          <p id="backstory"></p>
          <div class="actions">
            <button class="btn" id="speakBtn">ðŸ”ˆ Narrate</button>
            <button class="btn ghost" id="stopSpeakBtn">Stop</button>
            <select id="voiceSel" class="picker"></select>
            <select id="moodSel" class="picker"><option>Soothing</option><option>Mysterious</option><option>Empowering</option></select>
            <input id="rateSel" type="range" min="0.6" max="1.1" step="0.05" value="0.85"/>
          </div>
          <!-- Ambient -->
          <div class="actions">
            <select id="ambSel" class="picker"><option value="none">Ambient: Off</option><option value="rain">Ambient: Mystic Rain</option></select>
            <button class="btn" id="ambPlay">Play</button>
            <button class="btn ghost" id="ambStop">Stop</button>
            <label>Vol <input id="ambVol" type="range" min="0" max="1" step="0.01" value="0.35"></label>
            <audio id="ambAudio" loop></audio>
          </div>
        </div>
        <aside>
          <h3>Keywords</h3><ul id="keywords"></ul>
          <h3>Mantra</h3><blockquote id="mantra"></blockquote>
          <h3>Sigil</h3><div id="sigilBox"></div>
        </aside>
      </div>

      <!-- NUMEROLOGY -->
      <section class="card"><h3>Your Numerology Chart</h3><div id="chartGrid" class="num-grid"></div></section>

      <!-- CONNECTIONS -->
      <section class="card"><h3>Connections</h3><div id="connections"></div><div id="timeline" class="timeline"></div></section>

      <!-- LUCKY DAYS -->
      <section class="card"><h3>Lucky Days</h3><div id="luckyCalendar" class="calendar"></div></section>

      <!-- NAME RESONANCE (the missing bit!) -->
      <section class="card"><h3>Name Resonance Hints</h3><div id="nameResonance"></div></section>

      <div class="actions">
        <button class="btn" id="cardBtn">Create Mystic Card</button>
        <button class="btn" id="pdfBtn">Save as PDF</button>
        <button class="btn" id="copyBtn">Copy summary</button>
        <button class="btn ghost" id="resetBtn">Reset</button>
      </div>

      <canvas id="cardCanvas" width="1080" height="1350" class="hidden"></canvas>
    </section>

    <footer class="footer"><small>Â© <span id="year"></span> 7 Tarot</small></footer>
  </main>

  <script>
    // Ambient audio
    const AMBIENT={rain:["ambient/binaural.mp3","ambient/binaural.wav"]};
    function chooseAmbient(k){const a=document.getElementById('ambAudio');if(!k||k==='none'){a.pause();a.removeAttribute('src');return;}a.src=AMBIENT[k][0];}
    function wireAmbient(){const a=document.getElementById('ambAudio');document.getElementById('ambSel').onchange=e=>chooseAmbient(e.target.value);document.getElementById('ambPlay').onclick=()=>{a.volume=parseFloat(document.getElementById('ambVol').value||"0.35");a.play().catch(()=>alert("Click page first."));};document.getElementById('ambStop').onclick=()=>a.pause();document.getElementById('ambVol').oninput=e=>a.volume=parseFloat(e.target.value);}
    // Fake guides for demo
    const GUIDES=[{id:"mireth",name:"Mireth",element:"Forest",domains:["Growth"],backstory:"Mireth walks with dirt under their nails...",mantra:"I tend the small so the great can grow.",keywords:["seed","root"],sigil:"âœ¿"}];
    function setText(id,t){document.getElementById(id).textContent=t}
    function renderSigil(text){document.getElementById('sigilBox').innerHTML=text}
    function renderChart(chart){document.getElementById('chartGrid').innerHTML='<div>'+JSON.stringify(chart)+'</div>'}
    function connectionsBlock(){return "Demo connections"}
    function luckyCalendar(){document.getElementById('luckyCalendar').innerHTML="<div>Calendar demo</div>"}
    function nameResonanceBlock(lifePath){return "Demo resonance for life path "+lifePath}
    function speakText(txt){alert("Narrating: "+txt)}
    (function(){
      document.getElementById('year').textContent=new Date().getFullYear();
      wireAmbient();
      document.getElementById('guideForm').onsubmit=e=>{
        e.preventDefault();
        const g=GUIDES[0];
        setText('guideName',g.name);setText('guideMeta',g.element);setText('lifePath',"Life Path 8");setText('seedOut',"Seed 123");setText('backstory',g.backstory);setText('mantra',g.mantra);renderSigil(g.sigil);
        document.getElementById('keywords').innerHTML=g.keywords.map(k=>"<li>"+k+"</li>").join("");
        renderChart({lifePath:8});document.getElementById('connections').innerHTML=connectionsBlock();luckyCalendar();
        const nr=document.getElementById('nameResonance');if(nr) nr.innerHTML=nameResonanceBlock(8);
        document.getElementById('formSection').classList.add('hidden');document.getElementById('resultSection').classList.remove('hidden');
      };
      document.getElementById('demoBtn').onclick=()=>{document.getElementById('name').value="Demo User";document.getElementById('dob').value="1990-08-17";document.getElementById('guideForm').requestSubmit();};
    })();
  </script>
</body>
</html>
