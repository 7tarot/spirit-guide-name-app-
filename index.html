<!DOCTYPE html>
<html lang="en">
<head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Spirit Guide App â€” Classic</title></head>
<body>
  <h1>ðŸ”® Spirit Guide App</h1>
  <p>Classic layout with ambient sounds + narrator voice choice.</p>
  <p><button id="enableSound">Enable sound</button></p>
  <label>Ambient: <select id="ambient">
    <option value="">None</option>
    <option value="ambient/rain.wav">Rain</option>
    <option value="ambient/choir.wav">Choir</option>
    <option value="ambient/drone.wav">Drone</option>
  </select></label>
  <button id="stopAudio">Stop</button>
  <audio id="player" preload="none"></audio>
  <div>
    <label>Narrator voice:</label>
    <select id="voiceSelect"></select>
    <button id="speakBtn">Play</button>
    <button id="stopSpeakBtn">Stop</button>
  </div>
<script>
const player=document.getElementById('player');
document.getElementById('enableSound').onclick=()=>{player.muted=false;player.play().catch(()=>{});player.pause();};
document.getElementById('ambient').onchange=(e)=>{const src=e.target.value;if(!src){player.pause();return;}player.src=src;player.loop=true;player.play().catch(()=>alert('Click Enable sound then choose again.'));};
document.getElementById('stopAudio').onclick=()=>{player.pause();player.currentTime=0;};

function populateVoices(){const sel=document.getElementById('voiceSelect');const voices=speechSynthesis.getVoices();sel.innerHTML='';voices.forEach((v,i)=>{const opt=document.createElement('option');opt.value=i;opt.textContent=v.name+' ('+v.lang+')';sel.appendChild(opt);});}
populateVoices();if('onvoiceschanged' in speechSynthesis){speechSynthesis.onvoiceschanged=populateVoices;}
document.getElementById('speakBtn').onclick=()=>{const u=new SpeechSynthesisUtterance('Your Spirit Guide reading is ready.');const sel=document.getElementById('voiceSelect');const voices=speechSynthesis.getVoices();if(sel.value&&voices[sel.value])u.voice=voices[sel.value];speechSynthesis.speak(u);};
document.getElementById('stopSpeakBtn').onclick=()=>{if(speechSynthesis.speaking)speechSynthesis.cancel();};
</script>
</body></html>